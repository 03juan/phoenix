!function(){"use strict";var t="undefined"!=typeof window?window:global;if("function"!=typeof t.require){var n={},e={},o=function(t,n){return{}.hasOwnProperty.call(t,n)},i=function(t,n){var e,o,i=[];e=/^\.\.?(\/|$)/.test(n)?[t,n].join("/").split("/"):n.split("/");for(var s=0,r=e.length;r>s;s++)o=e[s],".."===o?i.pop():"."!==o&&""!==o&&i.push(o);return i.join("/")},s=function(t){return t.split("/").slice(0,-1).join("/")},r=function(n){return function(e){var o=s(n),r=i(o,e);return t.require(r,n)}},a=function(t,n){var o={id:t,exports:{}};return e[t]=o,n(o.exports,r(t),o),o.exports},c=function(t,s){var r=i(t,".");if(null==s&&(s="/"),o(e,r))return e[r].exports;if(o(n,r))return a(r,n[r]);var c=i(r,"./index");if(o(e,c))return e[c].exports;if(o(n,c))return a(c,n[c]);throw new Error('Cannot find module "'+t+'" from "'+s+'"')},u=function(t,e){if("object"==typeof t)for(var i in t)o(t,i)&&(n[i]=t[i]);else n[t]=e},h=function(){var t=[];for(var e in n)o(n,e)&&t.push(e);return t};t.require=c,t.require.define=u,t.require.register=u,t.require.list=h,t.require.brunch=!0}}(),require.define({phoenix:function(t){"use strict";var n=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")};t.__esModule=!0;var e={connecting:0,open:1,closing:2,closed:3},o=t.Channel=function(){function t(e,o,i,s){n(this,t),this.topic=e,this.message=o,this.callback=i,this.socket=s,this.bindings=null,this.reset()}return t.prototype.reset=function(){this.bindings=[]},t.prototype.on=function(t,n){this.bindings.push({event:t,callback:n})},t.prototype.isMember=function(t){return this.topic===t},t.prototype.off=function(t){this.bindings=this.bindings.filter(function(n){return n.event!==t})},t.prototype.trigger=function(t,n){this.bindings.filter(function(n){return n.event===t}).map(function(t){return t.callback(n)})},t.prototype.send=function(t,n){this.socket.send({topic:this.topic,event:t,payload:n})},t.prototype.leave=function(){var t=void 0===arguments[0]?{}:arguments[0];this.socket.leave(this.topic,t),this.reset()},t}(),i=(t.Socket=function(){function t(o){var s=void 0===arguments[1]?{}:arguments[1];n(this,t),this.states=e,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.flushEveryMs=50,this.reconnectTimer=null,this.reconnectAfterMs=5e3,this.heartbeatIntervalMs=3e4,this.channels=[],this.sendBuffer=[],this.transport=s.transport||window.WebSocket||i,this.heartbeatIntervalMs=s.heartbeatIntervalMs||this.heartbeatIntervalMs,this.logger=s.logger||function(){},this.longpoller_timeout=s.longpoller_timeout||2e4,this.endPoint=this.expandEndpoint(o),this.resetBufferTimer(),this.reconnect()}return t.prototype.protocol=function(){return location.protocol.match(/^https/)?"wss":"ws"},t.prototype.expandEndpoint=function(t){return"/"!==t.charAt(0)?t:"/"===t.charAt(1)?""+this.protocol()+":"+t:""+this.protocol()+"://"+location.host+t},t.prototype.close=function(t,n,e){this.conn&&(this.conn.onclose=function(){},n?this.conn.close(n,e||""):this.conn.close(),this.conn=null),t&&t()},t.prototype.reconnect=function(){var t=this;this.close(function(){t.conn=new t.transport(t.endPoint),t.conn.timeout=t.longpoller_timeout,t.conn.onopen=function(){return t.onConnOpen()},t.conn.onerror=function(n){return t.onConnError(n)},t.conn.onmessage=function(n){return t.onConnMessage(n)},t.conn.onclose=function(n){return t.onConnClose(n)}})},t.prototype.resetBufferTimer=function(){var t=this;clearTimeout(this.sendBufferTimer),this.sendBufferTimer=setTimeout(function(){return t.flushSendBuffer()},this.flushEveryMs)},t.prototype.log=function(t){this.logger(t)},t.prototype.onOpen=function(t){this.stateChangeCallbacks.open.push(t)},t.prototype.onClose=function(t){this.stateChangeCallbacks.close.push(t)},t.prototype.onError=function(t){this.stateChangeCallbacks.error.push(t)},t.prototype.onMessage=function(t){this.stateChangeCallbacks.message.push(t)},t.prototype.onConnOpen=function(){var t=this;clearInterval(this.reconnectTimer),this.conn.skipHeartbeat||(clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return t.sendHeartbeat()},this.heartbeatIntervalMs)),this.rejoinAll(),this.stateChangeCallbacks.open.forEach(function(t){return t()})},t.prototype.onConnClose=function(t){var n=this;this.log("WS close:"),this.log(t),clearInterval(this.reconnectTimer),clearInterval(this.heartbeatTimer),this.reconnectTimer=setInterval(function(){return n.reconnect()},this.reconnectAfterMs),this.stateChangeCallbacks.close.forEach(function(n){return n(t)})},t.prototype.onConnError=function(t){this.log("WS error:"),this.log(t),this.stateChangeCallbacks.error.forEach(function(n){return n(t)})},t.prototype.connectionState=function(){switch(this.conn&&this.conn.readyState){case this.states.connecting:return"connecting";case this.states.open:return"open";case this.states.closing:return"closing";default:return"closed"}},t.prototype.isConnected=function(){return"open"===this.connectionState()},t.prototype.rejoinAll=function(){var t=this;this.channels.forEach(function(n){return t.rejoin(n)})},t.prototype.rejoin=function(t){t.reset(),this.send({topic:t.topic,event:"join",payload:t.message}),t.callback(t)},t.prototype.join=function(t,n,e){var i=new o(t,n,e,this);this.channels.push(i),this.isConnected()&&this.rejoin(i)},t.prototype.leave=function(t){var n=void 0===arguments[1]?{}:arguments[1];this.send({topic:t,event:"leave",payload:n}),this.channels=this.channels.filter(function(n){return!n.isMember(t)})},t.prototype.send=function(t){var n=this,e=function(){return n.conn.send(JSON.stringify(t))};this.isConnected()?e():this.sendBuffer.push(e)},t.prototype.sendHeartbeat=function(){this.send({topic:"phoenix",event:"heartbeat",payload:{}})},t.prototype.flushSendBuffer=function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(t){return t()}),this.sendBuffer=[]),this.resetBufferTimer()},t.prototype.onConnMessage=function(t){this.log("message received:"),this.log(t);var n=JSON.parse(t.data),e=n.topic,o=n.event,i=n.payload;this.channels.filter(function(t){return t.isMember(e)}).forEach(function(t){return t.trigger(o,i)}),this.stateChangeCallbacks.message.forEach(function(t){t(e,o,i)})},t}(),t.LongPoller=function(){function t(o){n(this,t),this.retryInMs=5e3,this.endPoint=null,this.token=null,this.sig=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.states=e,this.upgradeEndpoint=this.normalizeEndpoint(o),this.pollEndpoint=this.upgradeEndpoint+(/\/$/.test(o)?"poll":"/poll"),this.readyState=this.states.connecting,this.poll()}return t.prototype.normalizeEndpoint=function(t){return t.replace("ws://","http://").replace("wss://","https://")},t.prototype.endpointURL=function(){return this.pollEndpoint+("?token="+encodeURIComponent(this.token)+"&sig="+encodeURIComponent(this.sig))},t.prototype.closeAndRetry=function(){this.close(),this.readyState=this.states.connecting},t.prototype.ontimeout=function(){this.onerror("timeout"),this.closeAndRetry()},t.prototype.poll=function(){var t=this;(this.readyState===this.states.open||this.readyState===this.states.connecting)&&s.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),function(n){if(n){var e=n.status,o=n.token,i=n.sig,s=n.messages;t.token=o,t.sig=i}else var e=0;switch(e){case 200:s.forEach(function(n){return t.onmessage({data:JSON.stringify(n)})}),t.poll();break;case 204:t.poll();break;case 410:t.readyState=t.states.open,t.onopen(),t.poll();break;case 0:case 500:t.onerror(),t.closeAndRetry();break;default:throw"unhandled poll status "+e}})},t.prototype.send=function(t){var n=this;s.request("POST",this.endpointURL(),"application/json",t,this.timeout,this.onerror.bind(this,"timeout"),function(t){t&&200===t.status||n.onerror(status)})},t.prototype.close=function(){this.readyState=this.states.closed,this.onclose()},t}()),s=t.Ajax=function(){function t(){n(this,t)}return t.request=function(t,n,e,o,i,s,r){if(window.XDomainRequest){var a=new XDomainRequest;this.xdomainRequest(a,t,n,o,i,s,r)}else{var a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");this.xhrRequest(a,t,n,e,o,s,r)}},t.xdomainRequest=function(t,n,e,o,i,s,r){var a=this;t.timeout=i,t.open(n,e),t.onload=function(){var n=a.parseJSON(t.responseText);r&&r(n)},s&&(t.ontimeout=s),t.onprogress=function(){},t.send(o)},t.xhrRequest=function(t,n,e,o,i,s,r,a){var c=this;t.timeout=s,t.open(n,e,!0),t.setRequestHeader("Content-Type",o),t.onerror=function(){a&&a(null)},t.onreadystatechange=function(){if(t.readyState===c.states.complete&&a){var n=c.parseJSON(t.responseText);a(n)}},r&&(t.ontimeout=r),t.send(i)},t.parseJSON=function(t){return t&&""!==t?JSON.parse(t):null},t}();s.states={complete:4}}}),"object"!=typeof window||window.Phoenix||(window.Phoenix=require("phoenix"));